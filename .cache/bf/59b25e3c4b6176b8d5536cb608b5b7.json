{"id":"views/pages/editProfile.js","dependencies":[{"name":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/package.json","includedInParent":true,"mtime":1618139297000},{"name":"./../../App","loc":{"line":1,"column":16},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/App.js"},{"name":"lit-html","loc":{"line":2,"column":28},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/node_modules/lit-html/lit-html.js"},{"name":"./../../Router","loc":{"line":3,"column":37},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/Router.js"},{"name":"./../../Auth","loc":{"line":4,"column":17},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/Auth.js"},{"name":"./../../Utils","loc":{"line":5,"column":18},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/Utils.js"},{"name":"./../../UserAPI","loc":{"line":6,"column":20},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/UserAPI.js"},{"name":"../../Toast","loc":{"line":7,"column":18},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/Toast.js"},{"name":"moment","loc":{"line":8,"column":19},"parent":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/src/views/pages/editProfile.js","resolved":"/Users/danielbrouse/Downloads/vanilla-spa/vanilla-spa-frontend/node_modules/moment/moment.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _App = _interopRequireDefault(require(\"./../../App\"));\n\nvar _litHtml = require(\"lit-html\");\n\nvar _Router = require(\"./../../Router\");\n\nvar _Auth = _interopRequireDefault(require(\"./../../Auth\"));\n\nvar _Utils = _interopRequireDefault(require(\"./../../Utils\"));\n\nvar _UserAPI = _interopRequireDefault(require(\"./../../UserAPI\"));\n\nvar _Toast = _interopRequireDefault(require(\"../../Toast\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n                <input type=\\\"file\\\" name=\\\"avatar\\\" />\\n              \"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n                <sl-avatar image=\\\"\", \"/images/\", \"\\\"></sl-avatar>\\n                <input type=\\\"file\\\" name=\\\"avatar\\\" />\\n              \"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n          <p>Updated: \", \"</p>\\n          <sl-form class=\\\"page-form\\\" @sl-submit=\", \">\\n            <div class=\\\"input-group\\\">\\n              <sl-input type=\\\"text\\\" name=\\\"firstName\\\" value=\\\"\", \"\\\" placeholder=\\\"First Name\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-input type=\\\"text\\\" name=\\\"lastName\\\" value=\\\"\", \"\\\" placeholder=\\\"Last Name\\\"></sl-input>\\n            </div>\\n            <div class=\\\"input-group\\\">\\n              <sl-input type=\\\"text\\\" name=\\\"email\\\" value=\\\"\", \"\\\" placeholder=\\\"Email Address\\\"></sl-input>\\n            </div>            \\n            <div class=\\\"input-group\\\">\\n              <label>Avatar</label><br>          \\n              \", \"\\n            </div>\\n            <sl-button type=\\\"primary\\\" class=\\\"submit-btn\\\" submit>Update Profile</sl-button>\\n          </sl-form>\\n        \"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n          <sl-spinner></sl-spinner>\\n        \"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n      <va-app-header title=\\\"Edit Profile\\\" user=\", \"></va-app-header>\\n      <div class=\\\"page-content\\\">        \\n        \", \"\\n      </div>\\n    \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nclass EditProfileView {\n  init() {\n    console.log('EditProfileView.init');\n    document.title = 'Edit Profile';\n    this.user = null;\n    this.render();\n\n    _Utils.default.pageIntroAnim();\n\n    this.getUser();\n  }\n\n  async getUser() {\n    try {\n      this.user = await _UserAPI.default.getUser(_Auth.default.currentUser._id);\n      this.render();\n    } catch (err) {\n      _Toast.default.show(err, 'error');\n    }\n  }\n\n  async updateProfileSubmitHandler(e) {\n    e.preventDefault();\n    const formData = e.detail.formData;\n    const submitBtn = document.querySelector('.submit-btn');\n    submitBtn.setAttribute('loading', '');\n\n    try {\n      const updatedUser = await _UserAPI.default.updateUser(_Auth.default.currentUser._id, formData);\n      delete updatedUser.password;\n      this.user = updatedUser;\n      _Auth.default.currentUser = updatedUser;\n      this.render();\n\n      _Toast.default.show('profile updated');\n    } catch (err) {\n      _Toast.default.show(err, 'error');\n    }\n\n    submitBtn.removeAttribute('loading');\n  }\n\n  render() {\n    const template = (0, _litHtml.html)(_templateObject(), JSON.stringify(_Auth.default.currentUser), this.user == null ? (0, _litHtml.html)(_templateObject2()) : (0, _litHtml.html)(_templateObject3(), (0, _moment.default)(_Auth.default.currentUser.updatedAt).format('MMMM Do YYYY, @ h:mm a'), this.updateProfileSubmitHandler.bind(this), this.user.firstName, this.user.lastName, this.user.email, this.user.avatar ? (0, _litHtml.html)(_templateObject4(), _App.default.apiBase, this.user.avatar) : (0, _litHtml.html)(_templateObject5())));\n    (0, _litHtml.render)(template, _App.default.rootEl);\n  }\n\n}\n\nvar _default = new EditProfileView();\n\nexports.default = _default;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"views/pages/editProfile.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"views/pages/editProfile.js","original":{"line":2,"column":0}},{"generated":{"line":12,"column":0},"source":"views/pages/editProfile.js","original":{"line":3,"column":0}},{"generated":{"line":14,"column":0},"source":"views/pages/editProfile.js","original":{"line":4,"column":0}},{"generated":{"line":16,"column":0},"source":"views/pages/editProfile.js","original":{"line":5,"column":0}},{"generated":{"line":18,"column":0},"source":"views/pages/editProfile.js","original":{"line":6,"column":0}},{"generated":{"line":20,"column":0},"source":"views/pages/editProfile.js","original":{"line":7,"column":0}},{"generated":{"line":22,"column":0},"source":"views/pages/editProfile.js","original":{"line":8,"column":0}},{"generated":{"line":78,"column":0},"source":"views/pages/editProfile.js","original":{"line":10,"column":0}},{"name":"EditProfileView","generated":{"line":78,"column":6},"source":"views/pages/editProfile.js","original":{"line":10,"column":6}},{"generated":{"line":78,"column":21},"source":"views/pages/editProfile.js","original":{"line":10,"column":0}},{"generated":{"line":78,"column":22},"source":"views/pages/editProfile.js","original":{"line":10,"column":22}},{"name":"init","generated":{"line":79,"column":0},"source":"views/pages/editProfile.js","original":{"line":11,"column":2}},{"name":"init","generated":{"line":79,"column":2},"source":"views/pages/editProfile.js","original":{"line":11,"column":2}},{"generated":{"line":79,"column":6},"source":"views/pages/editProfile.js","original":{"line":11,"column":6}},{"generated":{"line":79,"column":9},"source":"views/pages/editProfile.js","original":{"line":11,"column":8}},{"name":"console","generated":{"line":80,"column":0},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"name":"console","generated":{"line":80,"column":4},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"generated":{"line":80,"column":11},"source":"views/pages/editProfile.js","original":{"line":12,"column":11}},{"name":"log","generated":{"line":80,"column":12},"source":"views/pages/editProfile.js","original":{"line":12,"column":12}},{"generated":{"line":80,"column":15},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"generated":{"line":80,"column":16},"source":"views/pages/editProfile.js","original":{"line":12,"column":16}},{"generated":{"line":80,"column":38},"source":"views/pages/editProfile.js","original":{"line":12,"column":4}},{"name":"document","generated":{"line":81,"column":0},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"name":"document","generated":{"line":81,"column":4},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":81,"column":12},"source":"views/pages/editProfile.js","original":{"line":13,"column":12}},{"name":"title","generated":{"line":81,"column":13},"source":"views/pages/editProfile.js","original":{"line":13,"column":13}},{"generated":{"line":81,"column":18},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":81,"column":21},"source":"views/pages/editProfile.js","original":{"line":13,"column":21}},{"generated":{"line":81,"column":35},"source":"views/pages/editProfile.js","original":{"line":13,"column":4}},{"generated":{"line":82,"column":0},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"name":"user","generated":{"line":82,"column":9},"source":"views/pages/editProfile.js","original":{"line":14,"column":9}},{"generated":{"line":82,"column":13},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"generated":{"line":82,"column":16},"source":"views/pages/editProfile.js","original":{"line":14,"column":16}},{"generated":{"line":82,"column":20},"source":"views/pages/editProfile.js","original":{"line":14,"column":4}},{"generated":{"line":83,"column":0},"source":"views/pages/editProfile.js","original":{"line":15,"column":4}},{"name":"render","generated":{"line":83,"column":9},"source":"views/pages/editProfile.js","original":{"line":15,"column":9}},{"generated":{"line":83,"column":15},"source":"views/pages/editProfile.js","original":{"line":15,"column":4}},{"name":"Utils","generated":{"line":85,"column":0},"source":"views/pages/editProfile.js","original":{"line":16,"column":4}},{"name":"pageIntroAnim","generated":{"line":85,"column":19},"source":"views/pages/editProfile.js","original":{"line":16,"column":10}},{"generated":{"line":85,"column":32},"source":"views/pages/editProfile.js","original":{"line":16,"column":4}},{"generated":{"line":87,"column":0},"source":"views/pages/editProfile.js","original":{"line":17,"column":4}},{"name":"getUser","generated":{"line":87,"column":9},"source":"views/pages/editProfile.js","original":{"line":17,"column":9}},{"generated":{"line":87,"column":16},"source":"views/pages/editProfile.js","original":{"line":17,"column":4}},{"generated":{"line":88,"column":0},"source":"views/pages/editProfile.js","original":{"line":18,"column":3}},{"generated":{"line":90,"column":0},"source":"views/pages/editProfile.js","original":{"line":20,"column":2}},{"name":"getUser","generated":{"line":90,"column":8},"source":"views/pages/editProfile.js","original":{"line":20,"column":8}},{"generated":{"line":90,"column":15},"source":"views/pages/editProfile.js","original":{"line":20,"column":2}},{"generated":{"line":90,"column":18},"source":"views/pages/editProfile.js","original":{"line":20,"column":17}},{"generated":{"line":91,"column":0},"source":"views/pages/editProfile.js","original":{"line":21,"column":4}},{"generated":{"line":91,"column":8},"source":"views/pages/editProfile.js","original":{"line":21,"column":8}},{"generated":{"line":92,"column":0},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"name":"user","generated":{"line":92,"column":11},"source":"views/pages/editProfile.js","original":{"line":22,"column":11}},{"generated":{"line":92,"column":15},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"generated":{"line":92,"column":18},"source":"views/pages/editProfile.js","original":{"line":22,"column":18}},{"name":"UserAPI","generated":{"line":92,"column":24},"source":"views/pages/editProfile.js","original":{"line":22,"column":24}},{"name":"getUser","generated":{"line":92,"column":41},"source":"views/pages/editProfile.js","original":{"line":22,"column":32}},{"generated":{"line":92,"column":48},"source":"views/pages/editProfile.js","original":{"line":22,"column":24}},{"name":"Auth","generated":{"line":92,"column":49},"source":"views/pages/editProfile.js","original":{"line":22,"column":40}},{"name":"currentUser","generated":{"line":92,"column":63},"source":"views/pages/editProfile.js","original":{"line":22,"column":45}},{"generated":{"line":92,"column":74},"source":"views/pages/editProfile.js","original":{"line":22,"column":40}},{"name":"_id","generated":{"line":92,"column":75},"source":"views/pages/editProfile.js","original":{"line":22,"column":57}},{"generated":{"line":92,"column":78},"source":"views/pages/editProfile.js","original":{"line":22,"column":24}},{"generated":{"line":92,"column":79},"source":"views/pages/editProfile.js","original":{"line":22,"column":6}},{"generated":{"line":93,"column":0},"source":"views/pages/editProfile.js","original":{"line":23,"column":6}},{"name":"render","generated":{"line":93,"column":11},"source":"views/pages/editProfile.js","original":{"line":23,"column":11}},{"generated":{"line":93,"column":17},"source":"views/pages/editProfile.js","original":{"line":23,"column":6}},{"generated":{"line":94,"column":0},"source":"views/pages/editProfile.js","original":{"line":24,"column":5}},{"generated":{"line":94,"column":5},"source":"views/pages/editProfile.js","original":{"line":21,"column":4}},{"generated":{"line":94,"column":6},"source":"views/pages/editProfile.js","original":{"line":24,"column":5}},{"name":"err","generated":{"line":94,"column":13},"source":"views/pages/editProfile.js","original":{"line":24,"column":11}},{"generated":{"line":94,"column":16},"source":"views/pages/editProfile.js","original":{"line":24,"column":5}},{"generated":{"line":94,"column":18},"source":"views/pages/editProfile.js","original":{"line":24,"column":15}},{"name":"Toast","generated":{"line":95,"column":0},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"name":"show","generated":{"line":95,"column":21},"source":"views/pages/editProfile.js","original":{"line":25,"column":12}},{"generated":{"line":95,"column":25},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"name":"err","generated":{"line":95,"column":26},"source":"views/pages/editProfile.js","original":{"line":25,"column":17}},{"generated":{"line":95,"column":29},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"generated":{"line":95,"column":31},"source":"views/pages/editProfile.js","original":{"line":25,"column":22}},{"generated":{"line":95,"column":38},"source":"views/pages/editProfile.js","original":{"line":25,"column":6}},{"generated":{"line":96,"column":0},"source":"views/pages/editProfile.js","original":{"line":26,"column":5}},{"generated":{"line":97,"column":0},"source":"views/pages/editProfile.js","original":{"line":27,"column":3}},{"generated":{"line":99,"column":0},"source":"views/pages/editProfile.js","original":{"line":29,"column":2}},{"name":"updateProfileSubmitHandler","generated":{"line":99,"column":8},"source":"views/pages/editProfile.js","original":{"line":29,"column":8}},{"generated":{"line":99,"column":34},"source":"views/pages/editProfile.js","original":{"line":29,"column":2}},{"name":"e","generated":{"line":99,"column":35},"source":"views/pages/editProfile.js","original":{"line":29,"column":35}},{"generated":{"line":99,"column":36},"source":"views/pages/editProfile.js","original":{"line":29,"column":2}},{"generated":{"line":99,"column":38},"source":"views/pages/editProfile.js","original":{"line":29,"column":37}},{"name":"e","generated":{"line":100,"column":0},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"name":"e","generated":{"line":100,"column":4},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"generated":{"line":100,"column":5},"source":"views/pages/editProfile.js","original":{"line":30,"column":5}},{"name":"preventDefault","generated":{"line":100,"column":6},"source":"views/pages/editProfile.js","original":{"line":30,"column":6}},{"generated":{"line":100,"column":20},"source":"views/pages/editProfile.js","original":{"line":30,"column":4}},{"generated":{"line":101,"column":0},"source":"views/pages/editProfile.js","original":{"line":31,"column":4}},{"name":"formData","generated":{"line":101,"column":10},"source":"views/pages/editProfile.js","original":{"line":31,"column":10}},{"generated":{"line":101,"column":18},"source":"views/pages/editProfile.js","original":{"line":31,"column":18}},{"name":"e","generated":{"line":101,"column":21},"source":"views/pages/editProfile.js","original":{"line":31,"column":21}},{"generated":{"line":101,"column":22},"source":"views/pages/editProfile.js","original":{"line":31,"column":22}},{"name":"detail","generated":{"line":101,"column":23},"source":"views/pages/editProfile.js","original":{"line":31,"column":23}},{"generated":{"line":101,"column":29},"source":"views/pages/editProfile.js","original":{"line":31,"column":21}},{"name":"formData","generated":{"line":101,"column":30},"source":"views/pages/editProfile.js","original":{"line":31,"column":30}},{"generated":{"line":101,"column":38},"source":"views/pages/editProfile.js","original":{"line":31,"column":4}},{"generated":{"line":102,"column":0},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"name":"submitBtn","generated":{"line":102,"column":10},"source":"views/pages/editProfile.js","original":{"line":32,"column":10}},{"generated":{"line":102,"column":19},"source":"views/pages/editProfile.js","original":{"line":32,"column":19}},{"name":"document","generated":{"line":102,"column":22},"source":"views/pages/editProfile.js","original":{"line":32,"column":22}},{"generated":{"line":102,"column":30},"source":"views/pages/editProfile.js","original":{"line":32,"column":30}},{"name":"querySelector","generated":{"line":102,"column":31},"source":"views/pages/editProfile.js","original":{"line":32,"column":31}},{"generated":{"line":102,"column":44},"source":"views/pages/editProfile.js","original":{"line":32,"column":22}},{"generated":{"line":102,"column":45},"source":"views/pages/editProfile.js","original":{"line":32,"column":45}},{"generated":{"line":102,"column":58},"source":"views/pages/editProfile.js","original":{"line":32,"column":22}},{"generated":{"line":102,"column":59},"source":"views/pages/editProfile.js","original":{"line":32,"column":4}},{"name":"submitBtn","generated":{"line":103,"column":0},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"name":"submitBtn","generated":{"line":103,"column":4},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":103,"column":13},"source":"views/pages/editProfile.js","original":{"line":33,"column":13}},{"name":"setAttribute","generated":{"line":103,"column":14},"source":"views/pages/editProfile.js","original":{"line":33,"column":14}},{"generated":{"line":103,"column":26},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":103,"column":27},"source":"views/pages/editProfile.js","original":{"line":33,"column":27}},{"generated":{"line":103,"column":36},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":103,"column":38},"source":"views/pages/editProfile.js","original":{"line":33,"column":38}},{"generated":{"line":103,"column":40},"source":"views/pages/editProfile.js","original":{"line":33,"column":4}},{"generated":{"line":105,"column":0},"source":"views/pages/editProfile.js","original":{"line":34,"column":4}},{"generated":{"line":105,"column":8},"source":"views/pages/editProfile.js","original":{"line":34,"column":8}},{"generated":{"line":106,"column":0},"source":"views/pages/editProfile.js","original":{"line":35,"column":6}},{"name":"updatedUser","generated":{"line":106,"column":12},"source":"views/pages/editProfile.js","original":{"line":35,"column":12}},{"generated":{"line":106,"column":23},"source":"views/pages/editProfile.js","original":{"line":35,"column":23}},{"generated":{"line":106,"column":26},"source":"views/pages/editProfile.js","original":{"line":35,"column":26}},{"name":"UserAPI","generated":{"line":106,"column":32},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"name":"updateUser","generated":{"line":106,"column":49},"source":"views/pages/editProfile.js","original":{"line":35,"column":40}},{"generated":{"line":106,"column":59},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"name":"Auth","generated":{"line":106,"column":60},"source":"views/pages/editProfile.js","original":{"line":35,"column":51}},{"name":"currentUser","generated":{"line":106,"column":74},"source":"views/pages/editProfile.js","original":{"line":35,"column":56}},{"generated":{"line":106,"column":85},"source":"views/pages/editProfile.js","original":{"line":35,"column":51}},{"name":"_id","generated":{"line":106,"column":86},"source":"views/pages/editProfile.js","original":{"line":35,"column":68}},{"generated":{"line":106,"column":89},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"name":"formData","generated":{"line":106,"column":91},"source":"views/pages/editProfile.js","original":{"line":35,"column":73}},{"generated":{"line":106,"column":99},"source":"views/pages/editProfile.js","original":{"line":35,"column":32}},{"generated":{"line":106,"column":100},"source":"views/pages/editProfile.js","original":{"line":35,"column":6}},{"generated":{"line":107,"column":0},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"name":"updatedUser","generated":{"line":107,"column":13},"source":"views/pages/editProfile.js","original":{"line":36,"column":13}},{"generated":{"line":107,"column":24},"source":"views/pages/editProfile.js","original":{"line":36,"column":24}},{"name":"password","generated":{"line":107,"column":25},"source":"views/pages/editProfile.js","original":{"line":36,"column":25}},{"generated":{"line":107,"column":33},"source":"views/pages/editProfile.js","original":{"line":36,"column":6}},{"generated":{"line":108,"column":0},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"name":"user","generated":{"line":108,"column":11},"source":"views/pages/editProfile.js","original":{"line":37,"column":11}},{"generated":{"line":108,"column":15},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"name":"updatedUser","generated":{"line":108,"column":18},"source":"views/pages/editProfile.js","original":{"line":37,"column":18}},{"generated":{"line":108,"column":29},"source":"views/pages/editProfile.js","original":{"line":37,"column":6}},{"name":"Auth","generated":{"line":109,"column":0},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"name":"currentUser","generated":{"line":109,"column":20},"source":"views/pages/editProfile.js","original":{"line":38,"column":11}},{"generated":{"line":109,"column":31},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"name":"updatedUser","generated":{"line":109,"column":34},"source":"views/pages/editProfile.js","original":{"line":38,"column":25}},{"generated":{"line":109,"column":45},"source":"views/pages/editProfile.js","original":{"line":38,"column":6}},{"generated":{"line":110,"column":0},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"name":"render","generated":{"line":110,"column":11},"source":"views/pages/editProfile.js","original":{"line":39,"column":11}},{"generated":{"line":110,"column":17},"source":"views/pages/editProfile.js","original":{"line":39,"column":6}},{"name":"Toast","generated":{"line":112,"column":0},"source":"views/pages/editProfile.js","original":{"line":40,"column":6}},{"name":"show","generated":{"line":112,"column":21},"source":"views/pages/editProfile.js","original":{"line":40,"column":12}},{"generated":{"line":112,"column":25},"source":"views/pages/editProfile.js","original":{"line":40,"column":6}},{"generated":{"line":112,"column":26},"source":"views/pages/editProfile.js","original":{"line":40,"column":17}},{"generated":{"line":112,"column":43},"source":"views/pages/editProfile.js","original":{"line":40,"column":6}},{"generated":{"line":113,"column":0},"source":"views/pages/editProfile.js","original":{"line":41,"column":5}},{"generated":{"line":113,"column":5},"source":"views/pages/editProfile.js","original":{"line":34,"column":4}},{"generated":{"line":113,"column":6},"source":"views/pages/editProfile.js","original":{"line":41,"column":5}},{"name":"err","generated":{"line":113,"column":13},"source":"views/pages/editProfile.js","original":{"line":41,"column":11}},{"generated":{"line":113,"column":16},"source":"views/pages/editProfile.js","original":{"line":41,"column":5}},{"generated":{"line":113,"column":18},"source":"views/pages/editProfile.js","original":{"line":41,"column":15}},{"name":"Toast","generated":{"line":114,"column":0},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"name":"show","generated":{"line":114,"column":21},"source":"views/pages/editProfile.js","original":{"line":42,"column":12}},{"generated":{"line":114,"column":25},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"name":"err","generated":{"line":114,"column":26},"source":"views/pages/editProfile.js","original":{"line":42,"column":17}},{"generated":{"line":114,"column":29},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"generated":{"line":114,"column":31},"source":"views/pages/editProfile.js","original":{"line":42,"column":22}},{"generated":{"line":114,"column":38},"source":"views/pages/editProfile.js","original":{"line":42,"column":6}},{"generated":{"line":115,"column":0},"source":"views/pages/editProfile.js","original":{"line":43,"column":5}},{"name":"submitBtn","generated":{"line":117,"column":0},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"name":"submitBtn","generated":{"line":117,"column":4},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"generated":{"line":117,"column":13},"source":"views/pages/editProfile.js","original":{"line":44,"column":13}},{"name":"removeAttribute","generated":{"line":117,"column":14},"source":"views/pages/editProfile.js","original":{"line":44,"column":14}},{"generated":{"line":117,"column":29},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"generated":{"line":117,"column":30},"source":"views/pages/editProfile.js","original":{"line":44,"column":30}},{"generated":{"line":117,"column":39},"source":"views/pages/editProfile.js","original":{"line":44,"column":4}},{"generated":{"line":118,"column":0},"source":"views/pages/editProfile.js","original":{"line":45,"column":3}},{"name":"render","generated":{"line":120,"column":0},"source":"views/pages/editProfile.js","original":{"line":47,"column":2}},{"name":"render","generated":{"line":120,"column":2},"source":"views/pages/editProfile.js","original":{"line":47,"column":2}},{"generated":{"line":120,"column":8},"source":"views/pages/editProfile.js","original":{"line":47,"column":8}},{"generated":{"line":120,"column":11},"source":"views/pages/editProfile.js","original":{"line":47,"column":10}},{"generated":{"line":121,"column":0},"source":"views/pages/editProfile.js","original":{"line":48,"column":4}},{"name":"template","generated":{"line":121,"column":10},"source":"views/pages/editProfile.js","original":{"line":48,"column":10}},{"generated":{"line":121,"column":18},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"name":"html","generated":{"line":121,"column":25},"source":"views/pages/editProfile.js","original":{"line":48,"column":21}},{"generated":{"line":121,"column":38},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"name":"JSON","generated":{"line":121,"column":59},"source":"views/pages/editProfile.js","original":{"line":49,"column":49}},{"generated":{"line":121,"column":63},"source":"views/pages/editProfile.js","original":{"line":49,"column":53}},{"name":"stringify","generated":{"line":121,"column":64},"source":"views/pages/editProfile.js","original":{"line":49,"column":54}},{"generated":{"line":121,"column":73},"source":"views/pages/editProfile.js","original":{"line":49,"column":49}},{"name":"Auth","generated":{"line":121,"column":74},"source":"views/pages/editProfile.js","original":{"line":49,"column":64}},{"name":"currentUser","generated":{"line":121,"column":88},"source":"views/pages/editProfile.js","original":{"line":49,"column":69}},{"generated":{"line":121,"column":99},"source":"views/pages/editProfile.js","original":{"line":49,"column":49}},{"generated":{"line":121,"column":100},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"generated":{"line":121,"column":102},"source":"views/pages/editProfile.js","original":{"line":51,"column":11}},{"name":"user","generated":{"line":121,"column":107},"source":"views/pages/editProfile.js","original":{"line":51,"column":16}},{"generated":{"line":121,"column":111},"source":"views/pages/editProfile.js","original":{"line":51,"column":11}},{"generated":{"line":121,"column":115},"source":"views/pages/editProfile.js","original":{"line":51,"column":24}},{"generated":{"line":121,"column":119},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"name":"html","generated":{"line":121,"column":126},"source":"views/pages/editProfile.js","original":{"line":51,"column":32}},{"generated":{"line":121,"column":139},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"name":"html","generated":{"line":121,"column":167},"source":"views/pages/editProfile.js","original":{"line":53,"column":10}},{"generated":{"line":121,"column":180},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":202},"source":"views/pages/editProfile.js","original":{"line":54,"column":24}},{"name":"Auth","generated":{"line":121,"column":223},"source":"views/pages/editProfile.js","original":{"line":54,"column":31}},{"name":"currentUser","generated":{"line":121,"column":237},"source":"views/pages/editProfile.js","original":{"line":54,"column":36}},{"generated":{"line":121,"column":248},"source":"views/pages/editProfile.js","original":{"line":54,"column":31}},{"name":"updatedAt","generated":{"line":121,"column":249},"source":"views/pages/editProfile.js","original":{"line":54,"column":48}},{"generated":{"line":121,"column":258},"source":"views/pages/editProfile.js","original":{"line":54,"column":24}},{"name":"format","generated":{"line":121,"column":260},"source":"views/pages/editProfile.js","original":{"line":54,"column":59}},{"generated":{"line":121,"column":266},"source":"views/pages/editProfile.js","original":{"line":54,"column":24}},{"generated":{"line":121,"column":267},"source":"views/pages/editProfile.js","original":{"line":54,"column":66}},{"generated":{"line":121,"column":291},"source":"views/pages/editProfile.js","original":{"line":54,"column":24}},{"generated":{"line":121,"column":292},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":294},"source":"views/pages/editProfile.js","original":{"line":55,"column":50}},{"name":"updateProfileSubmitHandler","generated":{"line":121,"column":299},"source":"views/pages/editProfile.js","original":{"line":55,"column":55}},{"generated":{"line":121,"column":325},"source":"views/pages/editProfile.js","original":{"line":55,"column":50}},{"name":"bind","generated":{"line":121,"column":326},"source":"views/pages/editProfile.js","original":{"line":55,"column":82}},{"generated":{"line":121,"column":330},"source":"views/pages/editProfile.js","original":{"line":55,"column":50}},{"generated":{"line":121,"column":331},"source":"views/pages/editProfile.js","original":{"line":55,"column":87}},{"generated":{"line":121,"column":335},"source":"views/pages/editProfile.js","original":{"line":55,"column":50}},{"generated":{"line":121,"column":336},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":338},"source":"views/pages/editProfile.js","original":{"line":57,"column":62}},{"name":"user","generated":{"line":121,"column":343},"source":"views/pages/editProfile.js","original":{"line":57,"column":67}},{"generated":{"line":121,"column":347},"source":"views/pages/editProfile.js","original":{"line":57,"column":62}},{"name":"firstName","generated":{"line":121,"column":348},"source":"views/pages/editProfile.js","original":{"line":57,"column":72}},{"generated":{"line":121,"column":357},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":359},"source":"views/pages/editProfile.js","original":{"line":60,"column":61}},{"name":"user","generated":{"line":121,"column":364},"source":"views/pages/editProfile.js","original":{"line":60,"column":66}},{"generated":{"line":121,"column":368},"source":"views/pages/editProfile.js","original":{"line":60,"column":61}},{"name":"lastName","generated":{"line":121,"column":369},"source":"views/pages/editProfile.js","original":{"line":60,"column":71}},{"generated":{"line":121,"column":377},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":379},"source":"views/pages/editProfile.js","original":{"line":63,"column":58}},{"name":"user","generated":{"line":121,"column":384},"source":"views/pages/editProfile.js","original":{"line":63,"column":63}},{"generated":{"line":121,"column":388},"source":"views/pages/editProfile.js","original":{"line":63,"column":58}},{"name":"email","generated":{"line":121,"column":389},"source":"views/pages/editProfile.js","original":{"line":63,"column":68}},{"generated":{"line":121,"column":394},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":396},"source":"views/pages/editProfile.js","original":{"line":67,"column":17}},{"name":"user","generated":{"line":121,"column":401},"source":"views/pages/editProfile.js","original":{"line":67,"column":22}},{"generated":{"line":121,"column":405},"source":"views/pages/editProfile.js","original":{"line":67,"column":17}},{"name":"avatar","generated":{"line":121,"column":406},"source":"views/pages/editProfile.js","original":{"line":67,"column":27}},{"generated":{"line":121,"column":412},"source":"views/pages/editProfile.js","original":{"line":67,"column":16}},{"name":"html","generated":{"line":121,"column":419},"source":"views/pages/editProfile.js","original":{"line":67,"column":37}},{"generated":{"line":121,"column":432},"source":"views/pages/editProfile.js","original":{"line":67,"column":16}},{"name":"App","generated":{"line":121,"column":454},"source":"views/pages/editProfile.js","original":{"line":68,"column":36}},{"name":"apiBase","generated":{"line":121,"column":467},"source":"views/pages/editProfile.js","original":{"line":68,"column":40}},{"generated":{"line":121,"column":474},"source":"views/pages/editProfile.js","original":{"line":67,"column":16}},{"generated":{"line":121,"column":476},"source":"views/pages/editProfile.js","original":{"line":68,"column":58}},{"name":"user","generated":{"line":121,"column":481},"source":"views/pages/editProfile.js","original":{"line":68,"column":63}},{"generated":{"line":121,"column":485},"source":"views/pages/editProfile.js","original":{"line":68,"column":58}},{"name":"avatar","generated":{"line":121,"column":486},"source":"views/pages/editProfile.js","original":{"line":68,"column":68}},{"generated":{"line":121,"column":492},"source":"views/pages/editProfile.js","original":{"line":67,"column":16}},{"name":"html","generated":{"line":121,"column":500},"source":"views/pages/editProfile.js","original":{"line":70,"column":17}},{"generated":{"line":121,"column":513},"source":"views/pages/editProfile.js","original":{"line":67,"column":16}},{"generated":{"line":121,"column":534},"source":"views/pages/editProfile.js","original":{"line":51,"column":10}},{"generated":{"line":121,"column":535},"source":"views/pages/editProfile.js","original":{"line":48,"column":18}},{"generated":{"line":121,"column":536},"source":"views/pages/editProfile.js","original":{"line":48,"column":4}},{"generated":{"line":122,"column":0},"source":"views/pages/editProfile.js","original":{"line":79,"column":4}},{"name":"template","generated":{"line":122,"column":25},"source":"views/pages/editProfile.js","original":{"line":79,"column":11}},{"generated":{"line":122,"column":33},"source":"views/pages/editProfile.js","original":{"line":79,"column":4}},{"name":"App","generated":{"line":122,"column":35},"source":"views/pages/editProfile.js","original":{"line":79,"column":21}},{"name":"rootEl","generated":{"line":122,"column":48},"source":"views/pages/editProfile.js","original":{"line":79,"column":25}},{"generated":{"line":122,"column":54},"source":"views/pages/editProfile.js","original":{"line":79,"column":4}},{"generated":{"line":123,"column":0},"source":"views/pages/editProfile.js","original":{"line":80,"column":3}},{"generated":{"line":125,"column":0},"source":"views/pages/editProfile.js","original":{"line":10,"column":22}},{"generated":{"line":127,"column":15},"source":"views/pages/editProfile.js","original":{"line":83,"column":15}},{"name":"EditProfileView","generated":{"line":127,"column":19},"source":"views/pages/editProfile.js","original":{"line":83,"column":19}},{"generated":{"line":127,"column":34},"source":"views/pages/editProfile.js","original":{"line":83,"column":15}}],"sources":{"views/pages/editProfile.js":"import App from './../../App'\nimport {html, render } from 'lit-html'\nimport {gotoRoute, anchorRoute} from './../../Router'\nimport Auth from './../../Auth'\nimport Utils from './../../Utils'\nimport UserAPI from './../../UserAPI'\nimport Toast from '../../Toast'\nimport moment from 'moment'\n\nclass EditProfileView {\n  init(){\n    console.log('EditProfileView.init')\n    document.title = 'Edit Profile'    \n    this.user = null\n    this.render()    \n    Utils.pageIntroAnim()\n    this.getUser()    \n  }\n\n  async getUser(){\n    try {\n      this.user = await UserAPI.getUser(Auth.currentUser._id)      \n      this.render()\n    }catch(err){\n      Toast.show(err, 'error')\n    }\n  }\n\n  async updateProfileSubmitHandler(e){\n    e.preventDefault()\n    const formData = e.detail.formData\n    const submitBtn = document.querySelector('.submit-btn')\n    submitBtn.setAttribute('loading', '')\n    try {\n      const updatedUser = await UserAPI.updateUser(Auth.currentUser._id, formData)      \n      delete updatedUser.password        \n      this.user = updatedUser     \n      Auth.currentUser = updatedUser\n      this.render()\n      Toast.show('profile updated')\n    }catch(err){      \n      Toast.show(err, 'error')\n    }\n    submitBtn.removeAttribute('loading')\n  }\n\n  render(){\n    const template = html`\n      <va-app-header title=\"Edit Profile\" user=${JSON.stringify(Auth.currentUser)}></va-app-header>\n      <div class=\"page-content\">        \n        ${(this.user == null) ? html`\n          <sl-spinner></sl-spinner>\n        `:html`\n          <p>Updated: ${moment(Auth.currentUser.updatedAt).format('MMMM Do YYYY, @ h:mm a')}</p>\n          <sl-form class=\"page-form\" @sl-submit=${this.updateProfileSubmitHandler.bind(this)}>\n            <div class=\"input-group\">\n              <sl-input type=\"text\" name=\"firstName\" value=\"${this.user.firstName}\" placeholder=\"First Name\"></sl-input>\n            </div>\n            <div class=\"input-group\">\n              <sl-input type=\"text\" name=\"lastName\" value=\"${this.user.lastName}\" placeholder=\"Last Name\"></sl-input>\n            </div>\n            <div class=\"input-group\">\n              <sl-input type=\"text\" name=\"email\" value=\"${this.user.email}\" placeholder=\"Email Address\"></sl-input>\n            </div>            \n            <div class=\"input-group\">\n              <label>Avatar</label><br>          \n              ${(this.user.avatar) ? html`\n                <sl-avatar image=\"${App.apiBase}/images/${this.user.avatar}\"></sl-avatar>\n                <input type=\"file\" name=\"avatar\" />\n              `: html`\n                <input type=\"file\" name=\"avatar\" />\n              `}\n            </div>\n            <sl-button type=\"primary\" class=\"submit-btn\" submit>Update Profile</sl-button>\n          </sl-form>\n        `}\n      </div>\n    `\n    render(template, App.rootEl)\n  }\n}\n\nexport default new EditProfileView()"},"lineCount":null}},"error":null,"hash":"970fa82e4dc889e21f9ca33b91c2be14","cacheData":{"env":{}}}